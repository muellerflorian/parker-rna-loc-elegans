



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="An ImJoy plugin to quantify RNA localization patterns">
      
      
        <link rel="canonical" href="https://muellerflorian.github.io/parker-rna-loc-elegans/cell-membrane-dist/">
      
      
        <meta name="author" content="Florian MUELLER">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/icons8-earth-worm-80.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Cell membrane distance - RNA localization in c. elegans</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.0284f74d.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.01803549.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#rna-distance-distribution-to-cell-cortex" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://muellerflorian.github.io/parker-rna-loc-elegans/" title="RNA localization in c. elegans" class="md-header-nav__button md-logo">
          
            <img src="../img/icons8-earth-worm-80.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              RNA localization in c. elegans
            </span>
            <span class="md-header-nav__topic">
              
                Cell membrane distance
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/muellerflorian/parker-rna-loc-elegans.git" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." title="Overview" class="md-tabs__link">
        Overview
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="./" title="RNA localization" class="md-tabs__link md-tabs__link--active">
          RNA localization
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../image-processing/" title="General workflows" class="md-tabs__link">
          General workflows
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../release-notes/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://muellerflorian.github.io/parker-rna-loc-elegans/" title="RNA localization in c. elegans" class="md-nav__button md-logo">
      
        <img src="../img/icons8-earth-worm-80.png" width="48" height="48">
      
    </a>
    RNA localization in c. elegans
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/muellerflorian/parker-rna-loc-elegans.git" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../tools/" title="Analysis tools" class="md-nav__link">
      Analysis tools
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      RNA localization
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        RNA localization
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cell membrane distance
      </label>
    
    <a href="./" title="Cell membrane distance" class="md-nav__link md-nav__link--active">
      Cell membrane distance
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-date" title="Test date" class="md-nav__link">
    Test date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysis-overview" title="Analysis overview" class="md-nav__link">
    Analysis overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-organisation" title="Data organisation" class="md-nav__link">
    Data organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rna-detection" title="RNA detection" class="md-nav__link">
    RNA detection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotations-of-cell-membrane" title="Annotations of cell membrane" class="md-nav__link">
    Annotations of cell membrane
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-with-fiji" title="Manual with FIJI" class="md-nav__link">
    Manual with FIJI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysis-with-imjoy" title="Analysis with ImJoy" class="md-nav__link">
    Analysis with ImJoy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-a-root-folder" title="Defining a root folder" class="md-nav__link">
    Defining a root folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analysis-options" title="Analysis options" class="md-nav__link">
    Analysis options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-an-analysis-and-monitor-progress" title="Launch an analysis and monitor progress" class="md-nav__link">
    Launch an analysis and monitor progress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stored-results" title="Stored results" class="md-nav__link">
    Stored results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nuc-envelop-dist/" title="Nuclear envelope distance" class="md-nav__link">
      Nuclear envelope distance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../granules-coloc/" title="Granule co-localization" class="md-nav__link">
      Granule co-localization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      General workflows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        General workflows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../image-processing/" title="Image processing" class="md-nav__link">
      Image processing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rna-detection/" title="RNA detection" class="md-nav__link">
      RNA detection
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../release-notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../licence/" title="Licence" class="md-nav__link">
      Licence
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#test-date" title="Test date" class="md-nav__link">
    Test date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysis-overview" title="Analysis overview" class="md-nav__link">
    Analysis overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-organisation" title="Data organisation" class="md-nav__link">
    Data organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rna-detection" title="RNA detection" class="md-nav__link">
    RNA detection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#annotations-of-cell-membrane" title="Annotations of cell membrane" class="md-nav__link">
    Annotations of cell membrane
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual-with-fiji" title="Manual with FIJI" class="md-nav__link">
    Manual with FIJI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysis-with-imjoy" title="Analysis with ImJoy" class="md-nav__link">
    Analysis with ImJoy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-a-root-folder" title="Defining a root folder" class="md-nav__link">
    Defining a root folder
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analysis-options" title="Analysis options" class="md-nav__link">
    Analysis options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-an-analysis-and-monitor-progress" title="Launch an analysis and monitor progress" class="md-nav__link">
    Launch an analysis and monitor progress
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stored-results" title="Stored results" class="md-nav__link">
    Stored results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="rna-distance-distribution-to-cell-cortex">RNA distance distribution to cell cortex<a class="headerlink" href="#rna-distance-distribution-to-cell-cortex" title="Permanent link">&para;</a></h1>
<p>Workflow to quantify the distance distribution of RNAs to the cell membrane.</p>
<ul>
<li><a href="https://bitbucket.org/muellerflorian/fish_quant/"  target="_blank"><strong>FISH-quant</strong></a>
to detect RNA positions.</li>
<li><strong>ImJoy</strong>: you can install the plugin from <a href="http://imjoy.io/#/app?w=RNA-localization&plugin=muellerflorian/parker-rna-loc-elegans:CellMembraneDistance@stable&upgrade=1" target="_blank"><strong>here.</strong></a></li>
</ul>
<p>ImJoy plugins will be available in the workspace: <strong><code>RNA-localization</code></strong></p>
<p>You will also need the ImJoy plugin engine, please consult the
<a href="https://imjoy.io/docs/#/user-manual?id=python-engine/" target="_blank"><strong>ImJoy documentation</strong></a></p>
<h2 id="test-date">Test date<a class="headerlink" href="#test-date" title="Permanent link">&para;</a></h2>
<p>You can download already processed test data for the Cell membrane enrichment plugin,
from
<a href="https://www.dropbox.com/s/0sbsmbg5xlccamp/img1.zip?dl=0"  target="_blank"><strong>Dropbox.</strong></a></p>
<p>The zip archive contains data following the naming conventions of the examples below.</p>
<h2 id="analysis-overview">Analysis overview<a class="headerlink" href="#analysis-overview" title="Permanent link">&para;</a></h2>
<p>For each RNA, we determine the closest distance of an RNA to a membrane. One thing to keep in mind more pixel close
to the membrane than far away, e.g. in the centre of the cell. A simple example is a circle. The maximum distance that
you can be away from the “membrane” is the radius of the circle. However, there is only one possibility to be that far
away (in the centre). However, there are many more “close” positions.  Plotting a histogram of the distance to the
membrane for all possible positions in the circle,  will yield a distribution that strongly enriched for small distances.</p>
<p>To normalised for this effect, we calculate all possible distance from the membrane
for a given cell with a <strong>distance transformation</strong>. This transformation results in
an image, where the pixel values are not fluorescence intensities but distance values. An example is shown below.
The blue lines are the cell outlines. The green dots are the detected RNAs. The image is the distance transform. The intensity values are distance to the membrane in pixels.</p>
<p><img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/dist_transform.png" width="400px"></img></p>
<p>We measure for all RNAs the distance to the membrane and calculate a
histogram. We report the</p>
<ul>
<li>Raw RNA distance histogram.</li>
<li>Normalised RNA histogram (values add to 1).</li>
<li>Normalised distance histogram of all pixels in the cell.</li>
<li>Normalised RNA histogram with the pixel histogram.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-summary-plot.png" width="600px"></img></p>
<h2 id="data-organisation">Data organisation<a class="headerlink" href="#data-organisation" title="Permanent link">&para;</a></h2>
<p>We enforce a strict data organisation for this analysis.
More information about can be found in the dedicated section below.</p>
<ol>
<li>One folder per sample ("parental folder"). Images have to be stored as
    individual channels. More details for how to convert images are <a href="../image-processing/#multi-channel-conversion">here</a>.</li>
<li>Each channel is saved as a separate <code>.tif</code> file containing all z-slices. Information
    for how to convert stacks can be found here are <a href="../image-processing/#multi-channel-conversion">here</a>.</li>
<li>RNA molecules are detected with <a href="https://bitbucket.org/muellerflorian/fish_quant">FISH-quant</a>. Analysis results are also stored directly in the parental folder. RNA detection is described in more detail <a href="../rna-detection/">here</a>.</li>
<li>Membrane annotations are stored in a dedicated subfolder <code>zstack_segmentation</code>.
    More information <a href="./#annotations-of-cell-membrane">below</a>.</li>
</ol>
<p>As an example, we have one image <code>img1</code>  with 3 channels. The first channels contain
analysed smFISH data, the third one contains the cell membrane annotations for two Z slices (slice 3 and 8).</p>
<div class="highlight"><pre><span></span>.
├─ img1/
│  ├─ C1-img1.tif                          # smFISH image (channel 1)
│  ├─ C1-img1__spots.txt                   # FQ detection results (channel 1)
│  ├─ C1-img1__settings_MATURE.txt         # FQ detection settings (channel 1)
│  ├─ C2-img1.tif                          # smFISH image of (channel 2)
│  ├─ C2-img1__spots.txt                   # FQ detection results (channel 2)
│  ├─ C2-img1__settings_MATURE.txt         # FQ detection settings (channel 2)
│  ├─ zstack_segmentation/
│  │  ├─ C3-img1_Z3.tif                    # Image of z-slice 1
│  │  ├─ C3-img1_Z3__RoiSet.zip            # Membrane annotation of slice 1
│  │  ├─ C3-img1_Z8.tif                    # Image of z-slice 2
│  │  ├─ C3-img1_Z8__RoiSet.zip            # Membrane annotation of slice 2
├─ img2/
.
</pre></div>

<h2 id="rna-detection">RNA detection<a class="headerlink" href="#rna-detection" title="Permanent link">&para;</a></h2>
<p>Detection of RNAs is performed with FISH-quant and detailed <a href="../rna-detection/">here</a>.</p>
<h2 id="annotations-of-cell-membrane">Annotations of cell membrane<a class="headerlink" href="#annotations-of-cell-membrane" title="Permanent link">&para;</a></h2>
<p>In order to be able to compute the enrichment towards cell membrane or nuclear
envelope, these membranes have to be annotated in EACH z-slice that should be
considered in the analysis. Below we describe a manual annotation with FIJI,
in the future automated segmentation results could be considered as well.</p>
<h3 id="manual-with-fiji">Manual with FIJI<a class="headerlink" href="#manual-with-fiji" title="Permanent link">&para;</a></h3>
<p>Annotations have to be performed and stored as described below.</p>
<ol>
<li>For each multi-channel image, the annotations are stored in a dedicated sub-folder
    called <code>zstack_segmentation</code>.</li>
<li>
<p>Each annotated z-slice has to be saved as an individual image and the file name has to end with the
    corresponding z-slice <code>i</code> in the format <code>_Zi</code>. For instance, file name ends with <code>img1_ch3_Z3.tif</code>,
    where <code>3</code> is the actual slice number.</p>
<p>In <strong>FIJI</strong>, open the z-stack and go to menu <code>Image</code> &gt; <code>Stack</code> &gt; <code>Stack to images</code>.
You can then save each image with the according file-name.</p>
</li>
<li>
<p>Annotations are stored with the name of the corresponding image, with the
    additional suffix <code>__RoiSet.zip</code>. For the example above, the added suffix would be <code>img1_ch3_Z3__RoiSet.zip</code>.</p>
</li>
</ol>
<p>To perform the <strong>actual annotation</strong>, follow these steps</p>
<ol>
<li>Open FIJI.</li>
<li>Open the <strong>ROI manager</strong>: <code>Analyze</code> &gt; <code>Tools</code> &gt; <code>ROI manager</code></li>
<li>Open/Select the image that you would like to annotate.</li>
<li>Select the annotation tool of choice, e.g. freehand or polygon.</li>
<li>Outline first structure of interest. When done, press <code>Add(t)</code> in the ROI manager to add outline to the out line manager.</li>
<li>Proceed with all other structures. Enabling <code>Show all</code>, will show all defined regions.</li>
<li>Save regions by highlighting all regions in the list and pressing on <code>More</code> &gt;&gt; <code>Save ...</code></li>
<li>If only one region is saved, this will created a file with the extension <code>.roi</code>, if multiple regions will be save this will create a <code>.zip</code> file. As a file-name choose the name of the annotated image, followed by the suffix <code>**__RoiSet.zip**</code>.</li>
</ol>
<p><strong>IMPORTANT</strong>: these annotations could be used for training of a neural network. If this is intended, then ALL structures, e.g. nuclei, have to be annotated. Unwanted elements, e.g. nuclei touching the cell border, can be removed in a post-processing step.</p>
<h2 id="analysis-with-imjoy">Analysis with ImJoy<a class="headerlink" href="#analysis-with-imjoy" title="Permanent link">&para;</a></h2>
<p>The entire functionality of the plugin can be controlled within the plugin
window. If you expand the plugin, you will see all parameters and operations
that can be performed</p>
<p><img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-plugin-ui.png" width="350px"></img></p>
<h3 id="defining-a-root-folder">Defining a root folder<a class="headerlink" href="#defining-a-root-folder" title="Permanent link">&para;</a></h3>
<p>By default, ImJoy will open files in your home folder. If your data is at a different
location, you can set a root folder. Each time you specify a file, ImJoy will open
the file-dialog in this root folder. Press the button <code>Root folder</code> and specify the
desired folder.</p>
<p>The specified root folder is also saved, and will be resused the next time you launch
ImJoy.</p>
<h3 id="analysis-options">Analysis options<a class="headerlink" href="#analysis-options" title="Permanent link">&para;</a></h3>
<p>All options are explained in the Table below. If you change these parameters, the
changed values will be saved in the browser and reused the next time you launch
ImJoy.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dZ</code></td>
<td>int</td>
<td>2</td>
<td>Number of z-slices that will be used above and below the currently analyzed slice. Specify this value &gt; 0 if not all z-slices are annotated/</td>
</tr>
<tr>
<td><code>Zmin</code></td>
<td>int</td>
<td>0</td>
<td>Specify at which Z slice analysis should start. Value of 0 means that entire z-stack will be processed.</td>
</tr>
<tr>
<td><code>Zmax</code></td>
<td>int</td>
<td>0</td>
<td>As <code>Z min</code> but for maximum Z slice.</td>
</tr>
<tr>
<td><code>Channel</code></td>
<td>str</td>
<td>'C3-'</td>
<td>Unique identifier for channel containing annotations.</td>
</tr>
<tr>
<td><code>Hist [bin]</code></td>
<td>int</td>
<td>20</td>
<td>Bin size for histogram to measure membrane enrichment (in nm).</td>
</tr>
<tr>
<td><code>Hist [max]</code></td>
<td>int</td>
<td>100</td>
<td>Maximum value for bins to calculate membrane enrichment.</td>
</tr>
<tr>
<td><code>Image-size [X]</code></td>
<td>int</td>
<td>960</td>
<td>Size of image in X.</td>
</tr>
<tr>
<td><code>Image-size [Y]</code></td>
<td>int</td>
<td>960</td>
<td>Size of image in Y.</td>
</tr>
</tbody>
</table>
<h3 id="launch-an-analysis-and-monitor-progress">Launch an analysis and monitor progress<a class="headerlink" href="#launch-an-analysis-and-monitor-progress" title="Permanent link">&para;</a></h3>
<p>To analyze a FQ results file, you have to</p>
<ol>
<li>Specify the required parameters in the plugin interface.</li>
<li>Execute plugin with clicking on the Plugin name <code>Membrane Enrichment</code>. This will
display a file-dialog where you can select the FQ results file that you want to
analyze (ends with <code>__spots.txt</code>) that should be analyzed.</li>
<li>This file will then be processed and the final distance enrichment histogram
displayed in the interface. More plots and results file will be stored on the disk.</li>
</ol>
<p>Once you start the analysis, ImJoy will show you a progress window with progressbars
for the different steps. Once done, it will display the final result in this image.</p>
<p><img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-progress.png" width="450px"></img></p>
<h3 id="stored-results">Stored results<a class="headerlink" href="#stored-results" title="Permanent link">&para;</a></h3>
<p>The analysis script will create a new folder with the same name as the selected results file. To allow to redo the analysis with different settings, the plugin  will create for each performed analysis a separate sub folder <code>MembDist_yymmdd-hhmm</code>, where is a time-stamp in the format <code>yymmdd-hhmm</code>. This folder contains several files:</p>
<ul>
<li>
<p><strong>_DistanceEnrichmentSummary.png</strong>: image containing the pooled analysis of all slices
   <img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-summary-plot" width="600px"></img></p>
</li>
<li>
<p><strong>_HistogramPooled.csv</strong>: csv file containing the histograms of the RNA-membrane distance pooled from all z-slices. This can be opened with any Spreadsheet application (Excel, LibreOffice, Numbers, ...) and results from different images
can then be pooled together. It contains the following data</p>
<ul>
<li><code>center</code>: center of the bins</li>
<li><code>histRNA_all</code>: raw RNA distance histogram.</li>
<li><code>histRNA_all_norm</code>: normalized RNA histogram (values add to 1).</li>
<li><code>histpix_all_norm</code>: normalized distance histogram of all pixels in the cell.</li>
<li><code>hist_RNA_all_normPix</code>: normalized RNA histogram with the pixel histogram.
   <img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-csv-results" width="450px"></img></li>
<li><strong>Z-i.png</strong>: results of slice 'i'
   <img src="https://raw.githubusercontent.com/muellerflorian/rna-loc/master/docs/img/CMD-results-slice.png" width="600px"></img></li>
</ul>
</li>
<li>
<p><strong>DataAll.json</strong>: json file containing all analysis results including settings.</p>
</li>
</ul>
<p>For the example above, we would obtain the following folder structure
(shows only the relevant part for <code>C1-img1</code>)
<div class="highlight"><pre><span></span>.
├─ img1/
│  ├─ C1-img1.tif                          # smFISH image (channel 1)
│  ├─ C1-img1__spots.txt                   # FQ detection results (channel 1)
│  ├─ C1-img1__settings_MATURE.txt         # FQ detection settings (channel 1)
│  ├─ C1-img1__spots/
│  │  ├─ MembDist_181017-1629/
│  │  │  ├─ _HistogramPooled.csv
│  │  │  ├─ _DistanceEnrichmentSummary.png
│  │  │  ├─ DataAll.json
│  │  │  ├─ Z-1.png
│  │  │  ├─ Z-2.png
.
</pre></div></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../tools/" title="Analysis tools" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Analysis tools
              </span>
            </div>
          </a>
        
        
          <a href="../nuc-envelop-dist/" title="Nuclear envelope distance" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Nuclear envelope distance
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Florian MUELLER
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/muellerflorian" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://www.linkedin.com/in/muellerflorian/" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://scholar.google.fr/citations?user=WrEj9t4AAAAJ" class="md-footer-social__link fa fa-google"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>